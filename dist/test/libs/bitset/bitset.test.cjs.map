{"version":3,"file":"bitset.test.cjs","sources":["../../../../src/libs/bitset/bitset.test.ts"],"sourcesContent":["import { assert, throws } from \"libs/assert/assert.js\";\nimport { Bitset } from \"libs/bitset/bitset.js\";\nimport { relative, resolve } from \"node:path\";\nimport { test } from \"uvu\";\n\ntest.before(async () => {\n  const directory = resolve(\"./dist/test/\")\n  const { pathname } = new URL(import.meta.url)\n  console.log(relative(directory, pathname))\n})\n\nfunction format(bitmask: Bitset, digits: number) {\n  let s = bitmask.unsigned().toString(2)\n  while (s.length < digits) s = \"0\" + s\n  return s\n}\n\ntest(\"Identity\", async () => {\n  const bitmask = new Bitset(0b00000000, 8)\n\n  assert(bitmask.get(1) === false)\n  assert(format(bitmask, 8) === \"00000000\")\n})\n\ntest(\"Enable then disable\", async () => {\n  const bitmask = new Bitset(0b00000000, 8)\n\n  bitmask.enable(1)\n  assert(bitmask.get(1) === true)\n  assert(format(bitmask, 8) === \"00000010\")\n\n  bitmask.disable(1)\n  assert(bitmask.get(1) === false)\n  assert(format(bitmask, 8) === \"00000000\")\n})\n\ntest(\"Toggle then toggle\", async () => {\n  const bitmask = new Bitset(0b00000000, 8)\n\n  bitmask.toggle(1)\n  assert(bitmask.get(1) === true)\n  assert(format(bitmask, 8) === \"00000010\")\n\n  bitmask.toggle(1)\n  assert(bitmask.get(1) === false)\n  assert(format(bitmask, 8) === \"00000000\")\n})\n\ntest(\"Export Int32 to Uint32\", async () => {\n  const bitmask = new Bitset(Date.now(), 32)\n\n  const n0 = bitmask.value\n  const e0 = bitmask.unsigned()\n\n  bitmask.toggle(32)\n\n  const n1 = bitmask.value\n  const e1 = bitmask.unsigned()\n\n  assert(n0 > 0)\n  assert(n1 < 0)\n\n  assert(e0 > 0)\n  assert(e1 > 0)\n\n  const buffer = Buffer.from([0, 0, 0, 0])\n  assert(throws(() => buffer.writeUInt32BE(bitmask.value, 0)))\n  assert(!throws(() => buffer.writeUInt32BE(bitmask.unsigned(), 0)))\n})\n\ntest(\"First\", async () => {\n  const bitmask = new Bitset(0b11100011, 8)\n\n  assert(bitmask.first(2) === 3)\n  assert(bitmask.first(3) === 7)\n})\n\ntest(\"Last\", async () => {\n  const bitmask = new Bitset(0b11100111, 8)\n\n  assert(bitmask.last(2) === 3)\n  assert(bitmask.last(3) === 7)\n})\n\ntest.run()"],"names":["test","__awaiter","resolve","relative","Bitset","assert","throws"],"mappings":"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"}